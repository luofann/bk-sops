(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],Array(147).concat([function(t,e,a){"use strict";a.r(e);var n=a(393);var s=a(161);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(361);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"6c907545",null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(394);var s=a(165);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(395);var s=a(167);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(390);var s=a(178);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(399);var s=a(183);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(401);var s=a(208);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(400);var s=a(210);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(398);var s=a(212);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(397);var s=a(214);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(386);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"18530173",null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(396);var s=a(217);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(387);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"4ee3be39",null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(391);var s=a(220);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(388);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"3aeacee2",null);e["default"]=l.exports},,,function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:true});e.errorHandler=a;function a(e,a){if(e.isCancel){return}var n=e.data;console.error(e);var s="";if(n&&n.code){if(!n.code||n.code===404){a.exception={code:"404",msg:window.gettext("当前访问的页面不存在")}}else if(n.code===403){a.exception={code:"403",msg:window.gettext("sorry，您没有访问权限!")}}else if(n.code===405){a.exception={code:"405",msg:window.gettext("Sorry，您的权限不足!")}}else if(n.code===406){a.exception={code:"405",msg:window.gettext("Sorry，您的权限不足!")}}else if(n.code===500){a.exception={code:"500",msg:window.gettext("系统出现异常, 请记录下错误场景并与开发人员联系, 谢谢!")}}else if(n.code===502){a.exception={code:"502",msg:window.gettext("系统出现异常, 请记录下错误场景并与开发人员联系, 谢谢!")}}s=a.exception.msg}else{s=e.message||e.data.msg}t.bus.$emit("notify",{message:s,result:false})}}).call(this,a(11))},function(t,e,a){"use strict";a.r(e);var n=a(162);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(163));var i=n(a(44));var r=n(a(56));var o=n(a(45));var l=n(a(35));var c=a(36);var u=a(160);var d=["blue","red","orange","green","gray"];var f={name:"home",props:{title:String},data:function t(){return{businessList:[],i18n:{errorText:window.gettext("请求失败，点击重新加载"),finishedText:window.gettext("没有更多了")},loading:false,error:false,finished:false,offset:0,limit:10,total:0}},methods:(0,l["default"])({},(0,c.mapActions)("business",["getBusinessList"]),{onLoad:function t(){this.loadData()},loadData:function t(){var e=this;return(0,o["default"])(i["default"].mark(function t(){var a,n;return i["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return e.getBusinessList({offset:e.offset,limit:e.limit});case 3:a=s.sent;e.total=a.meta.total_count;n=Math.ceil(e.total/e.limit);if(e.offset+1>=n){e.finished=true}else{e.offset=e.offset+1}e.businessList=[].concat((0,r["default"])(e.businessList),(0,r["default"])(a.objects));e.businessList.map(function(t){var a=e.getTagColor(t);t.tagColor=a.tagColor;t.tag=a.tag});s.next=15;break;case 11:s.prev=11;s.t0=s["catch"](0);e.error=true;(0,u.errorHandler)(s.t0,e);case 15:s.prev=15;e.loading=false;return s.finish(15);case 18:case"end":return s.stop()}}},t,null,[[0,11,15,18]])}))()},getTagColor:function t(e){var a=this.$cookies.get(e.cc_id);var n=(0,s["default"])(e.cc_name,1),i=n[0];if(a){return{tagColor:a,tag:i}}else{var r=parseInt(Math.random()*4,10)+1;var o="tag-".concat(d[r]);this.$cookies.set(e.cc_id,o);return{tagColor:o,tag:i}}},onClickBusiness:function t(e){this.$store.commit("setBizId",e);this.$router.push({path:"/template/".concat(e)})}})};e["default"]=f},,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(166);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(56));var r=n(a(45));var o=n(a(35));var l=a(160);var c=a(36);var u={name:"TemplateList",props:{bizId:String},data:function t(){return{collectTemplateList:[],templateList:[],originalCollectTemplateList:[],originalTemplateList:[],business:{cc_name:""},i18n:{collect:window.gettext("收藏"),finishedText:window.gettext("没有更多了"),errorText:window.gettext("请求失败，点击重新加载"),placeholder:window.gettext("搜索流程名称")},loading:false,finished:false,error:false,offset:0,currPage:1,limit:10,total:0,value:""}},methods:(0,o["default"])({},(0,c.mapActions)("template",["getTemplateList"]),{loadData:function t(){var e=this;return(0,r["default"])(s["default"].mark(function t(){var a,n;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return e.getTemplateList({offset:e.offset,limit:e.limit});case 3:a=s.sent;e.total=a.meta.total_count;n=Math.ceil(e.total/e.limit);if(e.currPage>=n){e.finished=true}else{e.offset=e.currPage*e.limit;e.currPage+=1}e.templateList=[].concat((0,i["default"])(e.templateList),(0,i["default"])(a.objects));e.originalTemplateList=e.templateList;if(e.templateList.length>0){e.business=e.templateList[0]["business"]}e.getCollectedTemplateList();s.next=17;break;case 13:s.prev=13;s.t0=s["catch"](0);e.error=true;(0,l.errorHandler)(s.t0,e);case 17:s.prev=17;e.loading=false;return s.finish(17);case 20:case"end":return s.stop()}}},t,null,[[0,13,17,20]])}))()},getCollectedTemplateList:function t(){this.collectTemplateList=this.templateList.filter(function(t){return t["is_add"]});this.originalCollectTemplateList=this.collectTemplateList},search:function t(){var e=this;this.templateList=this.originalTemplateList.filter(function(t){return t.name.includes(e.value)});this.collectTemplateList=this.value?[]:this.originalCollectTemplateList},onClickTemplate:function t(e){this.$store.commit("setTemplateId",e);this.$router.push({path:"/task/create/".concat(e),query:{templateId:e}})}})};e["default"]=u},function(t,e,a){"use strict";a.r(e);var n=a(168);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(160);var l=n(a(226));var c=a(36);var u={name:"template_preview",components:{MobileCanvas:l["default"]},data:function t(){return{pipelineTree:{},loading:true,i18n:{loading:window.gettext("加载中...")}}},computed:(0,r["default"])({},(0,c.mapState)({templateId:function t(e){return e.templateId},excludeTaskNodes:function t(e){return e.excludeTaskNodes}}),{canvasData:function t(){var e=this.pipelineTree,a=e.line,n=a===void 0?[]:a,s=e.location,i=s===void 0?[]:s,r=e.gateways,o=r===void 0?{}:r;return{lines:n,nodes:i,gateways:o}}}),mounted:function t(){this.loadData()},methods:(0,r["default"])({},(0,c.mapActions)("template",["getPreviewTaskTree"]),{loadData:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a;return s["default"].wrap(function t(n){while(1){switch(n.prev=n.next){case 0:e.$toast.loading({mask:true,message:e.i18n.loading});a={template_id:e.$route.query.templateId||e.template_id,exclude_task_nodes_id:JSON.stringify(e.excludeTaskNodes),template_source:"business"};n.prev=2;n.next=5;return e.getPreviewTaskTree(a);case 5:e.pipelineTree=n.sent;n.next=11;break;case 8:n.prev=8;n.t0=n["catch"](2);(0,o.errorHandler)(n.t0,e);case 11:n.prev=11;e.loading=false;e.$toast.clear();return n.finish(11);case 15:case"end":return n.stop()}}},t,null,[[2,8,11,15]])}))()}})};e["default"]=u},function(t,e,a){"use strict";a.r(e);var n=a(170);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(37));var i=n(a(362));var r=n(a(364));var o=a(368);var l={name:"MobileCanvas",components:{MobileNodeTemplate:r["default"],JsFlow:i["default"]},props:{canvasData:{type:Object,default:function t(){return{nodes:[],lines:[],gateways:{}}}},editable:{type:Boolean,default:false}},data:function t(){return{endpointOptions:o.endpointOptions,connectorOptions:o.connectorOptions}},watch:{canvasData:function t(e){this.$refs.jsFlow.resetPosition();this.$store.commit("setTitle","子流程")}},mounted:function t(){var e=this;var a=this.getLineMap(this.canvasData);var n={type:"Label",name:"",cls:"branch-conditions",editable:false,location:"-60"};var i=this.canvasData.gateways;if(Object.keys(i).length){this.canvasData.nodes.forEach(function(t){if(t.type==="branchgateway"){var r=i[t.id].conditions;for(var o=0,l=Object.keys(r);o<l.length;o++){var c=l[o];var u=a.get(c);var d=(0,s["default"])({},n,{name:r[c].evaluate});e.$refs.jsFlow.addLineOverlay(u,d)}}})}},methods:{setCanvasPosition:function t(e){var a=window.innerWidth;var n=this.calcNodePosition({x:e.x,screenWidth:a});this.$refs.jsFlow.setCanvasPosition(n)},calcNodePosition:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},a=e.x,n=a===void 0?0:a,s=e.screenWidth,i=s===void 0?375:s,r=e.nodeWidth,o=r===void 0?152:r;return n*-1+i/2-o/2},getLineMap:function t(e){var a=e.lines,n=a===void 0?[]:a;var s=new Map;n.forEach(function(t){return s.set(t.id,t)});return s}}};e["default"]=l},function(t,e,a){"use strict";a.r(e);var n=a(172);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(365));var i={name:"MobileNodeTemplate",components:{Tooltips:s["default"]},props:{node:{type:Object,default:function t(){return{}}}},data:function t(){return{i18n:{start:window.gettext("开始"),end:window.gettext("结束"),detail:window.gettext("执行详情"),retry:window.gettext("重试"),skip:window.gettext("跳过"),sub:window.gettext("查看子流程")}}},methods:{onNodeClick:function t(e){var a=this.$store.state.pipelineTree;if(this.node.type==="subflow"){var n=a.activities[e.id].pipeline;if(n){this.$store.commit("setPipelineTree",n)}}else{console.log(a.activities[e.id].component.code);var s=a.activities[e.id].component.code;if(!this.node.componentCode){this.$set(this.node,"componentCode",s)}}}}};e["default"]=i},function(t,e,a){"use strict";a.r(e);var n=a(174);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";(function(t){var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(36);var l=a(160);var c={name:"Tooltips",props:{node:{type:Object,default:function t(){return{}}}},inject:["refreshTaskStatus"],data:function t(){return{i18n:{i18n:window.gettext("加载中"),detail:window.gettext("执行详情"),editTime:window.gettext("修改时间"),retry:window.gettext("重试"),skip:window.gettext("跳过"),skipSuccess:window.gettext("跳过成功"),skipFailed:window.gettext("跳过失败"),sub:window.gettext("查看子流程")},operating:false,show:true}},computed:(0,r["default"])({},(0,o.mapState)({taskId:function t(e){return e.taskId}})),methods:(0,r["default"])({},(0,o.mapActions)("task",["getTask","instanceNodeResume","instanceNodeSkip","getNodeRetryData"]),{onNodeOperationClick:function t(e){if(!this.operating){this.operating=true;this[e]()}},onNodeExecuteDetail:function t(){this.show=false;this.$router.push({name:"task_nodes",params:{node:this.node}})},retry:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a,n,i,r,o,c,u,d,f;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:e.show=false;e.$toast.loading({mask:true,message:e.i18n.loading});s.next=4;return e.getTask({id:e.taskId});case 4:a=s.sent;n=JSON.parse(a.pipeline_tree);i=e.taskId;r={taskId:i,nodeId:e.node.id,componentCode:n.activities[e.node.id].component.code};s.prev=8;s.next=11;return e.getNodeRetryData(r);case 11:o=s.sent;r.inputs=o.data.inputs;c={};for(u=0,d=Object.keys(r.inputs);u<d.length;u++){f=d[u];c["".concat(r.componentCode,".").concat(f)]={source_tag:"".concat(r.componentCode,".").concat(f),value:r.inputs[f]}}r.inputs=c;s.next=21;break;case 18:s.prev=18;s.t0=s["catch"](8);(0,l.errorHandler)(s.t0,e);case 21:e.$toast.clear();e.operating=false;e.$router.push({name:"task_reset",params:r});case 24:case"end":return s.stop()}}},t,null,[[8,18]])}))()},skip:function e(){var a=this;return(0,i["default"])(s["default"].mark(function e(){var n;return s["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;a.show=false;a.$toast.loading({mask:true,message:a.i18n.loading});s.next=5;return a.instanceNodeSkip({id:a.taskId,nodeId:a.node.id});case 5:n=s.sent;if(n.result){t.bus.$emit("notify",{message:a.i18n.skipSuccess});setTimeout(function(){a.refreshTaskStatus()},1e3)}else{(0,l.errorHandler)(n,a)}s.next=12;break;case 9:s.prev=9;s.t0=s["catch"](0);(0,l.errorHandler)(s.t0,a);case 12:s.prev=12;a.$toast.clear();a.operating=false;return s.finish(12);case 16:case"end":return s.stop()}}},e,null,[[0,9,12,16]])}))()},resume:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a;return s["default"].wrap(function t(n){while(1){switch(n.prev=n.next){case 0:n.prev=0;e.show=false;n.next=4;return e.instanceNodeResume({id:e.taskId,nodeId:e.node.id});case 4:a=n.sent;if(a.result){e.refreshTaskStatus()}else{(0,l.errorHandler)(a,e)}n.next=11;break;case 8:n.prev=8;n.t0=n["catch"](0);(0,l.errorHandler)(n.t0,e);case 11:n.prev=11;e.operating=false;return n.finish(11);case 14:case"end":return n.stop()}}},t,null,[[0,8,11,14]])}))()},editTime:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a,n,i,r,o;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:e.show=false;e.$toast.loading({mask:true,message:e.i18n.loading});s.next=4;return e.getTask({id:e.taskId});case 4:a=s.sent;n=JSON.parse(a.pipeline_tree);i=e.taskId;r={taskId:i,nodeId:e.node.id,componentCode:n.activities[e.node.id].component.code};s.next=10;return e.getNodeRetryData(r);case 10:o=s.sent;r.inputs=o.data.inputs;e.$toast.clear();e.operating=false;e.$router.push({name:"task_edit_timing",params:r});case 15:case"end":return s.stop()}}},t)}))()}})};e["default"]=c}).call(this,a(11))},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(179);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(56));var r=n(a(45));var o=n(a(35));var l=a(36);var c=a(160);var u=n(a(227));var d={name:"TaskList",components:{StatusIcon:u["default"]},data:function t(){return{taskList:[],originalTaskList:[],taskStatus:"",loading:false,finished:false,error:false,offset:0,currPage:1,limit:10,total:0,value:"",i18n:{placeholder:window.gettext("搜索任务名称"),errorText:window.gettext("请求失败，点击重新加载"),finishedText:window.gettext("没有更多了"),to:window.gettext("至")}}},methods:(0,o["default"])({},(0,l.mapActions)("taskList",["getTaskList","getTaskStatus"]),{loadData:function t(){var e=this;return(0,r["default"])(s["default"].mark(function t(){var a,n;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return e.getTaskList({offset:e.offset,limit:e.limit});case 3:a=s.sent;e.total=a.meta.total_count;n=Math.ceil(e.total/e.limit);if(e.currPage>=n){e.finished=true}else{e.offset=e.currPage*e.limit;e.currPage+=1}e.taskList=[].concat((0,i["default"])(e.originalTaskList),(0,i["default"])(a.objects));e.originalTaskList=e.taskList;e.fillTaskStatus();s.next=16;break;case 12:s.prev=12;s.t0=s["catch"](0);e.error=true;(0,c.errorHandler)(s.t0,e);case 16:s.prev=16;e.loading=false;return s.finish(16);case 19:case"end":return s.stop()}}},t,null,[[0,12,16,19]])}))()},fillTaskStatus:function t(){var e=this;return(0,r["default"])(s["default"].mark(function t(){var a,n,i,r,o,l,u;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:a=true;n=false;i=undefined;s.prev=3;r=e.taskList[Symbol.iterator]();case 5:if(a=(o=r.next()).done){s.next=24;break}l=o.value;if(!(l.is_started&&!l.is_finished)){s.next=20;break}s.prev=8;s.next=11;return e.getTaskStatus({id:l.id});case 11:u=s.sent;e.$set(l,"status",u.state);s.next=18;break;case 15:s.prev=15;s.t0=s["catch"](8);(0,c.errorHandler)(s.t0,e);case 18:s.next=21;break;case 20:l["status"]="CREATED";case 21:a=true;s.next=5;break;case 24:s.next=30;break;case 26:s.prev=26;s.t1=s["catch"](3);n=true;i=s.t1;case 30:s.prev=30;s.prev=31;if(!a&&r["return"]!=null){r["return"]()}case 33:s.prev=33;if(!n){s.next=36;break}throw i;case 36:return s.finish(33);case 37:return s.finish(30);case 38:case"end":return s.stop()}}},t,null,[[3,26,30,38],[8,15],[31,,33,37]])}))()},search:function t(){var e=this;console.log(this.originalTaskList);this.taskList=this.originalTaskList.filter(function(t){return t.name.includes(e.value)})},onClickTask:function t(e){this.$store.commit("setTaskId",e);this.$router.push({path:"/task/canvas?taskId=".concat(e)})}})};e["default"]=d},function(t,e,a){"use strict";a.r(e);var n=a(181);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(163));var i={CREATED:["circle","circle",window.gettext("未执行")],FINISHED:["checked","checked",window.gettext("完成")],FAILED:["close","clear",window.gettext("失败")],SUSPENDED:["pause","pause-circle",window.gettext("暂停")],REVOKED:["close","clear",window.gettext("撤销")],RUNNING:["more","more",window.gettext("运行中")]};var r={name:"NoData",props:{status:{type:String,default:""},showText:{type:Boolean,default:false}},data:function t(){return{name:"circle",cls:"circle",text:""}},watch:{status:function t(e){var a=(0,s["default"])(i[this.status],3);this.cls=a[0];this.name=a[1];this.text=a[2]}},created:function t(){if(this.status){var e=(0,s["default"])(i[this.status],3);this.cls=e[0];this.name=e[1];this.text=e[2];console.log(this.status,this.name,this.cls,this.text)}}};e["default"]=r},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(184);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";(function(t){var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(163));var i=n(a(56));var r=n(a(44));var o=n(a(45));var l=n(a(35));var c=a(228);var u=n(a(159));var d=a(36);var f=a(57);var v=n(a(185));var p=n(a(356));var m=a(160);var h=window.gettext("执行所有节点");var g={name:"TaskCreate",components:{NoData:v["default"],VantComponent:p["default"]},props:{templateId:String},data:function t(){return{loadingConfig:false,creating:false,show:false,dateTimeShow:false,columns:[],currentDate:new Date,currentRef:null,collected:false,collecting:false,templateData:{name:"",creator_name:"",create_time:""},templateConstants:{},schemes:[],scheme:h,i18n:{loading:window.gettext("加载中"),btnCreate:window.gettext("新建任务"),taskName:window.gettext("任务名称"),scheme:window.gettext("方案"),canvasPreview:window.gettext("预览流程图"),paramInfo:window.gettext("参数信息"),paramInput:window.gettext("输入参数值"),datetimeInput:window.gettext("请选择日期时间"),taskInfo:window.gettext("任务信息")},taskId:0,taskName:"",taskNameRule:{required:true,max:50,regex:c.NAME_REG},excludeTaskNodes:[],templatePipelineTree:{},variableInputRule:{required:true,max:20}}},computed:(0,l["default"])({},(0,d.mapState)({defaultSchemaIndex:function t(e){return e.defaultSchemaIndex}}),{sortedConstants:function t(){var e={};var t=Object.values(this.templateConstants).sort(function(t,e){return t.index-e.index});t.forEach(function(t){e[t["key"]]=t});return e}}),mounted:function t(){this.creating=false;this.loadData()},methods:(0,l["default"])({},(0,d.mapActions)("template",["getTemplateList","getTemplate","collectTemplate","createTask","getTemplateConstants","getSchemeList","getScheme","getPreviewTaskTree"]),(0,d.mapActions)("component",["getVariableConfig","getAtomConfig"]),{loadData:function t(){var e=this;return(0,o["default"])(r["default"].mark(function t(){return r["default"].wrap(function t(a){while(1){switch(a.prev=a.next){case 0:e.$toast.loading({mask:true,message:e.i18n.loading});Promise.all([e.getTemplate(e.templateId),e.getSchemeList(e.$store.state.bizId)]).then(function(t){e.fillTemplateData(t[0]);e.fillSchemeData(t[1]);e.$toast.clear()})["catch"](function(t){(0,m.errorHandler)(t,e);e.$toast.clear()});case 2:case"end":return a.stop()}}},t)}))()},fillSchemeData:function t(e){this.schemes=e;this.columns=[{text:h}].concat((0,i["default"])(this.schemes));this.scheme=this.columns[this.defaultSchemaIndex]},fillTemplateData:function t(e){this.templateData=e;var a=JSON.parse(this.templateData.pipeline_tree);this.templatePipelineTree=a;this.templateConstants=a.constants;this.taskName=this.getDefaultTaskName();this.isTemplateCollected();this.$store.commit("setTemplate",this.templateData);this.$store.commit("setPipelineTree",a);this.loadAtomOrVariableConfig(this.templateConstants)},onCreateClick:function t(){var e=this;this.$validator.validateAll().then(function(t){if(t&&!e.$validator.errors.items.length){e.createTaskAndStart()}})},createTaskAndStart:function t(){var e=this;return(0,o["default"])(r["default"].mark(function t(){var a,n,s,i;return r["default"].wrap(function t(r){while(1){switch(r.prev=r.next){case 0:if(e.creating){r.next=23;break}e.creating=true;e.$toast.loading({mask:true,message:e.i18n.loading});r.prev=3;a={template_id:e.templateId,exclude_task_nodes_id:JSON.stringify(e.excludeTaskNodes),template_source:"business"};r.next=7;return e.getPreviewTaskTree(a);case 7:n=r.sent;n.constants=e.templateConstants;s={name:e.taskName,description:"",exec_data:JSON.stringify(n)};r.next=12;return e.createTask(s);case 12:i=r.sent;if(i){e.taskId=i.id;e.$store.commit("setTaskId",e.taskId);e.$router.push({path:"/task/canvas",query:{taskId:e.taskId}})}r.next=19;break;case 16:r.prev=16;r.t0=r["catch"](3);(0,m.errorHandler)(r.t0,e);case 19:r.prev=19;e.creating=false;e.$toast.clear();return r.finish(19);case 23:case"end":return r.stop()}}},t,null,[[3,16,19,23]])}))()},onInputDataChange:function t(e,a,n){if(n==="datetime"){this.dateTimeShow=true;this.currentRef=a}else{this.templateConstants[a].value=e}},getDefaultTaskName:function t(){return this.templateData.name+"_"+(0,u["default"])().format("YYYYMMDDHHmmss")},onConfirm:function t(e){var a=this;return(0,o["default"])(r["default"].mark(function t(){var n,s,i,o;return r["default"].wrap(function t(r){while(1){switch(r.prev=r.next){case 0:a.show=false;n=0;if(!e.id){r.next=19;break}r.prev=3;r.next=6;return a.getScheme(e.id);case 6:a.scheme=r.sent;r.next=12;break;case 9:r.prev=9;r.t0=r["catch"](3);(0,m.errorHandler)(r.t0,a);case 12:a.scheme.text=a.scheme.name;s=Object.keys(a.templatePipelineTree.activities);i=a.scheme.data;if(i&&i.length){o=JSON.parse(i);a.excludeTaskNodes=s.filter(function(t){return!o.includes(t)})}n=a.columns.findIndex(function(t){return t.id===e.id});r.next=21;break;case 19:a.excludeTaskNodes=[];a.scheme=e;case 21:a.$store.commit("setExcludeTaskNodes",a.excludeTaskNodes);a.$store.commit("setDefaultSchemaIndex",n);case 23:case"end":return r.stop()}}},t,null,[[3,9]])}))()},collect:function t(){var e=this;return(0,o["default"])(r["default"].mark(function t(){var a,n;return r["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:if(e.collecting){s.next=16;break}e.collecting=true;a={template_id:e.templateId,method:e.collected?"delete":"add"};s.prev=3;s.next=6;return e.collectTemplate(a);case 6:n=s.sent;if(n.result){e.collected=!e.collected}else{(0,m.errorHandler)(n,e)}s.next=13;break;case 10:s.prev=10;s.t0=s["catch"](3);(0,m.errorHandler)(s.t0,e);case 13:s.prev=13;e.collecting=false;return s.finish(13);case 16:case"end":return s.stop()}}},t,null,[[3,10,13,16]])}))()},isTemplateCollected:function t(){var e=this;return(0,o["default"])(r["default"].mark(function t(){var a,n;return r["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:a=e.$store.state.collectedTemplateList;if(a.length){s.next=13;break}s.prev=2;s.next=5;return e.getTemplateList();case 5:n=s.sent;a=n.objects;a.forEach(function(t){if(e.templateData.id===t.id){e.templateData.is_add=t.is_add}});s.next=13;break;case 10:s.prev=10;s.t0=s["catch"](2);(0,m.errorHandler)(s.t0,e);case 13:e.collected=Boolean(e.templateData.is_add);case 14:case"end":return s.stop()}}},t,null,[[2,10]])}))()},onDateTimeConfirm:function t(e){if(this.currentRef){this.$set(this.templateConstants[this.currentRef],"value",(0,f.dateFormatter)(e))}this.dateTimeShow=false},onDateTimeCancel:function t(){this.dateTimeShow=false},loadAtomOrVariableConfig:function e(a){var n=this;return(0,o["default"])(r["default"].mark(function e(){var i,o,l,c,u,d,f;return r["default"].wrap(function e(r){while(1){switch(r.prev=r.next){case 0:n.loadingConfig=true;if(!t.$.context){t.$.context={}}i=0,o=Object.keys(a);case 3:if(!(i<o.length)){r.next=25;break}l=o[i];c=a[l];u=c.source_tag.split("."),d=(0,s["default"])(u,1),f=d[0];if(!(!t.$.atoms||!t.$.atoms[f])){r.next=21;break}r.prev=8;if(!c.custom_type){r.next=14;break}r.next=12;return n.getVariableConfig({customType:c.custom_type});case 12:r.next=16;break;case 14:r.next=16;return n.getAtomConfig({atomCode:f});case 16:r.next=21;break;case 18:r.prev=18;r.t0=r["catch"](8);(0,m.errorHandler)(r.t0,n);case 21:n.$set(c,"renderConfig",t.$.atoms[f]);case 22:i++;r.next=3;break;case 25:n.loadingConfig=false;case 26:case"end":return r.stop()}}},e,null,[[8,18]])}))()}})};e["default"]=g}).call(this,a(11))},function(t,e,a){"use strict";a.r(e);var n=a(404);var s=a(186);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(187);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"NoData",data:function t(){return{i18n:{noData:window.gettext("暂无数据")}}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(189);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(37));var i=n(a(58));var r=n(a(35));var o=a(374);var l=["input","int","textarea","datetime","checkbox","radio","select","password"];var c=a(375);var u={};var d=function t(e,a){var n=a(e);var s=n["default"];var i="vant-"+s.name.slice(4).toLowerCase();u[i]=s};c.keys().forEach(function(t){d(t,c)});var f={name:"VantForm",components:(0,r["default"])({},u),props:{renderConfig:{type:Array},sourceCode:{type:String,default:""},customType:{type:String,default:"cell"},label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},data:{type:Object}},data:function t(){return{componentTag:"cell",domName:"vant-cell",domAttr:{},atomConfig:{},key:"",attrs:{required:false}}},created:function t(){this.beforeRender()},methods:{beforeRender:function t(){var e=this;var a=this.sourceCode.split(".")[1];this.renderConfig.some(function(t){if(t["tag_code"]===a){e.atomConfig=t;if(!e.customType){e.label=t.attrs.name;e.componentTag=t.type}else{e.componentTag=a}e.processMetaVariable(t);if(t.attrs.validation){e.attrs.required=t.attrs.validation.some(function(t){return t.type==="required"});e.domAttr.validation={required:e.attrs.required}}if(t.attrs.placeholder){e.placeholder=t.attrs.placeholder}if(t.type==="select"){e.domAttr.select={multiple:t.attrs.multiple,columns:t.attrs.items,defaultVal:t.attrs.multiple?t.attrs.value:[t.attrs.items.findIndex(function(t){return t.text===e.value})],tagCode:e.customType?e.customType:e.sourceCode}}else if(t.type==="radio"){var n=e.value?e.value:t.attrs["default"];var r=t.attrs.items.findIndex(function(e){if((0,i["default"])(e)==="object"){return e.value===n}else{return e===t.attrs["default"]}});e.domAttr.select={multiple:false,columns:t.attrs.items,defaultIndex:r,tagCode:e.customType?e.customType:e.sourceCode}}else if(t.type==="checkbox"){var o=[];var c=e.data.value;var u=[];t.attrs.items.forEach(function(t){var a=e.data.value.includes(t.value);if(a){u.push(t.name)}o.push((0,s["default"])({},{selected:a,text:t.name},t))});e.value=u.join(",");e.domAttr.select={multiple:true,columns:o,defaultVal:c,tagCode:e.customType?e.customType:e.sourceCode}}else if(t.type==="int"){e.value=e.value?Number.parseInt(e.value):0}else if(t.type==="meta"){e.componentTag="cell"}else if(!l.includes(t.type)){e.componentTag="cell";e.value=JSON.stringify(e.data.value)}return true}});this.fillDomConfig()},processMetaVariable:function t(e){if(e.meta_transform&&this.data.is_meta){var a=e.meta_transform(this.data.meta||this.data);e.attrs=a.attrs;e.type=a.type;this.value=a.attrs.items.filter(function(t){return a.attrs.value.includes(t.value)}).map(function(t){return t.text}).join(",")}},fillDomConfig:function t(){if(this.componentTag==="radio"||this.componentTag==="checkbox"){this.domName="vant-select"}else{this.domName="vant-"+this.componentTag}this.domAttr.label=this.label;this.domAttr.placeholder=this.placeholder;this.domAttr.value=this.value;this.$set(this.domAttr,"data",this.data);this.domAttr.name=this.data.name;if(this.data.validation&&this.domAttr.validation){this.$set(this.domAttr.validation,"regex",new RegExp(this.data.validation))}}},render:function t(e){var a=this;return e(this.domName,{nativeOn:{change:function t(e){if(a.componentTag!=="password"){a.$emit("dataChange",e.target.value,a.data.key)}else{var n=new o.JSEncrypt;var s=n.encrypt(e.target.value);a.$emit("dataChange",s||e.target.value,a.data.key)}},click:function t(e){if(a.componentTag==="datetime"){a.$emit("dataChange",e.target.value,a.data.key,a.componentTag)}else if(a.componentTag==="select"||a.componentTag==="checkbox"){var n=a.$refs[a.data.key].value;if(a.componentTag==="checkbox"){n=a.$refs[a.data.key].checkedValue}if(n!==a.data.value){n=n?n.split(","):[];a.$emit("dataChange",n,a.data.key,a.componentTag)}}else if(a.componentTag==="radio"){var s=a.$refs[a.data.key].choseKey;a.$emit("dataChange",s,a.data.key,a.componentTag)}}},props:this.domAttr,ref:this.data.key})}};e["default"]=f},function(t,e,a){"use strict";a.r(e);var n=a(191);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantCell",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(193);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantCheckbox",props:{label:{type:String,default:""},value:{type:String,default:""},data:{type:Object}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(195);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantDatetime",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},data:{type:Object}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(197);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantInput",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},name:{type:String,default:""},validation:{type:Object,default:{}},type:{type:String,default:"text"}},computed:{isError:function t(){return this.errors.has("parameterInput")}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(199);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantInt",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Number,default:0}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(201);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantPassword",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},name:{type:String,default:""},validation:{type:Object,default:function t(){return{}}}},data:function t(){return{password:"",encrypted:true,passwordPlaceholder:"*****",i18n:{placeholder:window.gettext("要修改密码请点击后重新输入密码")}}},computed:{isError:function t(){return this.errors.has("parameterInput")}},mounted:function t(){this.init()},methods:{init:function t(){if(this.value){this.encrypted=true;this.password=this.passwordPlaceholder}},clearPassword:function t(){this.password="";this.encrypted=false}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(203);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantRadio",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},data:{type:Object}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(205);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantSelect",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""},select:{type:Object},data:{type:Object,default:function t(){return{}}}},data:function t(){return{multiple:{type:Boolean,default:false},defaultVal:{type:Array,default:[]},defaultIndex:{type:Number,default:0},choseKey:{type:String,default:""},multipleSelectOptions:[],show:false}},created:function t(){var e=this;this.multiple=this.select.multiple;if(this.multiple){this.defaultVal=this.select.defaultVal;this.select.columns.forEach(function(t){t.selected=e.defaultVal.includes(t.value)});this.multipleSelectOptions=this.select.columns;this.checkedValue=this.data.value}else{this.defaultIndex=this.select.defaultIndex;this.multipleSelectOptions=this.select.columns.map(function(t){return{text:t.name,key:t.value}});this.value=this.select.columns[this.defaultIndex].name;this.choseKey=this.select.columns[this.defaultIndex].key}},methods:{onOptionClick:function t(e){this.$set(e,"selected",!e.selected);this.value=this.multipleSelectOptions.filter(function(t){return t.selected}).map(function(t){return t.text}).join(",");this.checkedValue=this.multipleSelectOptions.filter(function(t){return t.selected}).map(function(t){return t.value}).join(",")},onConfirm:function t(e){this.show=false;this.value=e.text;this.choseKey=e.key}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(207);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={name:"VantTextarea",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""}}};e["default"]=n},function(t,e,a){"use strict";a.r(e);var n=a(209);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";(function(t){var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(36);var l=n(a(185));var c=n(a(356));var u=a(160);var d={name:"TaskReset",components:{NoData:l["default"],VantComponent:c["default"]},data:function t(){return{operating:false,show:false,defaultIndex:0,columns:[],inputs:{},nodeId:"",taskId:"",componentCode:"",operatingTagCode:"",formData:[],i18n:{btnCreate:window.gettext("执行任务"),retrySuccess:window.gettext("重试成功"),cancel:window.gettext("取消"),confirm:window.gettext("确定"),loading:window.gettext("加载中...")}}},created:function t(){this.loadData()},methods:(0,r["default"])({},(0,o.mapActions)("task",["instanceNodeRetry"]),{loadData:function t(){var e=this.$route.params;this.inputs=e.inputs;this.componentCode=e.componentCode;this.taskId=e.taskId;this.nodeId=e.nodeId},onClick:function t(){this.doRetry()},onClickCancel:function t(){this.gotoCanvas()},onSelect:function t(e){var a=e.defaultVal,n=e.columns,s=e.tagCode;this.show=true;this.columns=n;this.defaultIndex=a;this.operatingTagCode=s},onSelectConfirm:function t(e){this.$set(this.inputs[this.operatingTagCode],"value",e.value);this.show=false},onInputDataChange:function t(e,a){this.inputs[a].value=e},doRetry:function e(){var a=this;return(0,i["default"])(s["default"].mark(function e(){var n,i;return s["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:if(a.operating){s.next=18;break}a.operating=true;a.show=false;a.$toast.loading({mask:true,message:a.i18n.loading});n={instance_id:a.taskId,node_id:a.nodeId,component_code:a.componentCode,inputs:a.inputs};s.prev=5;s.next=8;return a.instanceNodeRetry(n);case 8:i=s.sent;if(i.result){t.bus.$emit("notify",{message:a.i18n.retrySuccess});a.gotoCanvas()}else{(0,u.errorHandler)(i,a)}s.next=15;break;case 12:s.prev=12;s.t0=s["catch"](5);(0,u.errorHandler)(s.t0,a);case 15:s.prev=15;a.operating=false;return s.finish(15);case 18:case"end":return s.stop()}}},e,null,[[5,12,15,18]])}))()},gotoCanvas:function t(){this.$router.push({path:"/task/canvas",query:{taskId:this.taskId}})}})};e["default"]=d}).call(this,a(11))},function(t,e,a){"use strict";a.r(e);var n=a(211);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";(function(t){var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(36);var l=a(160);var c={name:"task_edit_timing",data:function t(){return{show:false,inputs:{},taskId:"",nodeId:"",componentCode:"",operating:false,i18n:{cancel:window.gettext("取消"),confirm:window.gettext("确定"),timing:window.gettext("定时时间")}}},created:function t(){this.loadData()},methods:(0,r["default"])({},(0,o.mapActions)("task",["instanceNodeEditTime"]),{loadData:function t(){var e=this.$route.params;this.inputs=e.inputs;this.componentCode=e.componentCode;this.taskId=e.taskId;this.nodeId=e.nodeId},onClick:function t(){if(!this.operating){this.operating=true;this.editTime()}},editTime:function e(){var a=this;return(0,i["default"])(s["default"].mark(function e(){var n,i;return s["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:a.show=false;a.$toast.loading({mask:true,message:a.i18n.loading});n={instance_id:a.taskId,node_id:a.nodeId,component_code:a.componentCode,inputs:a.inputs};s.prev=3;s.next=6;return a.instanceNodeEditTime(n);case 6:i=s.sent;if(i.result){a.gotoCanvas();t.bus.$emit("notify",{message:window.gettext("修改定时时间成功")})}else{t.bus.$emit("notify",i);(0,l.errorHandler)(i,a)}s.next=13;break;case 10:s.prev=10;s.t0=s["catch"](3);(0,l.errorHandler)(s.t0,a);case 13:s.prev=13;a.operating=false;return s.finish(13);case 16:case"end":return s.stop()}}},e,null,[[3,10,13,16]])}))()},gotoCanvas:function t(){this.$router.push({path:"/task/canvas",query:{taskId:this.taskId}})}})};e["default"]=c}).call(this,a(11))},function(t,e,a){"use strict";a.r(e);var n=a(213);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(36);var l=a(160);var c={name:"TaskDetail",data:function t(){return{task:{},constants:{},i18n:{noData:window.gettext("暂无数据"),taskInfo:window.gettext("任务信息"),taskName:window.gettext("任务名称"),paramInfo:window.gettext("参数信息"),loading:window.gettext("加载中")}}},mounted:function t(){this.loadData()},methods:(0,r["default"])({},(0,o.mapActions)("task",["getTask"]),{loadData:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a;return s["default"].wrap(function t(n){while(1){switch(n.prev=n.next){case 0:e.$toast.loading({mask:true,message:e.i18n.loading});n.prev=1;n.next=4;return e.getTask({id:e.$route.query.taskId});case 4:e.task=n.sent;a=JSON.parse(e.task.pipeline_tree);e.constants=a.constants;n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](1);(0,l.errorHandler)(n.t0,e);case 12:n.prev=12;e.$toast.clear();return n.finish(12);case 15:case"end":return n.stop()}}},t,null,[[1,9,12,15]])}))()}})};e["default"]=c},function(t,e,a){"use strict";a.r(e);var n=a(215);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(44));var i=n(a(45));var r=n(a(35));var o=a(228);var l=a(160);var c=n(a(385));var u=n(a(185));var d=n(a(227));var f=n(a(357));var v=a(36);var p={name:"TaskNodes",components:{VueJsonPretty:f["default"],NoData:u["default"],StatusIcon:d["default"]},data:function t(){return{nodeDetail:{},status:"",showText:true,loadingIcon:true,i18n:{loading:window.gettext("加载中..."),executeInfo:window.gettext("执行信息"),startTime:window.gettext("开始时间"),endTime:window.gettext("结束时间"),costTime:window.gettext("耗时(S)"),skipped:window.gettext("失败后跳过"),yes:window.gettext("是"),no:window.gettext("否"),ignore:window.gettext("失败后自动忽略"),retryTimes:window.gettext("重试次数"),inputParameter:window.gettext("输入参数"),outputParameter:window.gettext("输出参数"),showTotal:window.gettext("查看全部"),errorInfo:window.gettext("异常信息"),executeHistory:window.gettext("执行记录")}}},created:function t(){this.loadData()},methods:(0,r["default"])({},(0,v.mapActions)("task",["getTask","getTaskStatus","getNodeDetail"]),{loadData:function t(){var e=this;return(0,i["default"])(s["default"].mark(function t(){var a,n,i;return s["default"].wrap(function t(s){while(1){switch(s.prev=s.next){case 0:e.$toast.loading({mask:true,message:e.i18n.loading});a=e.$route.params.node;n=e.$store.state.taskId;i={taskId:n,nodeId:a.id,componentCode:""};e.loadingIcon=true;Promise.all([e.getNodeDetail(i),e.getTaskStatus({id:n}),e.getTask({id:n})]).then(function(t){if(t[0].result){e.nodeDetail=t[0].data}e.status=t[1].data.state;e.nodeDetail.name=t[2].name;e.loadingIcon=false;e.$toast.clear()})["catch"](function(t){(0,l.errorHandler)(t,e);e.loadingIcon=false;e.$toast.clear()});case 6:case"end":return s.stop()}}},t)}))()},showParameters:function t(){this.$router.push({name:"task_node_parameter",params:{parameters:JSON.stringify(this.nodeDetail.inputs)}})},getLastTime:function t(e){return c["default"].timeTransform(e)},getOutputValue:function t(e){if(e.value==="undefined"||e.value===""){return"--"}else if(!e.preset&&this.$route.params.node.componentCode==="job_execute_task"){return e.value}else{if(o.URL_REG.test(e.value)){return'<a class="info-link" target="_blank" href="'.concat(e.value,'">').concat(e.value,"</a>")}return e.value}},transformFailInfo:function t(e){if(!e){return""}if(typeof e==="string"){var a=e.replace(/\n/g,"<br>");return a}else{return e}}})};e["default"]=p},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(218);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(35));var i=n(a(357));var r=a(36);var o={name:"task_node_parameter",components:{VueJsonPretty:i["default"]},data:function t(){return{parameters:{}}},mounted:function t(){this.loadData()},methods:(0,s["default"])({},(0,r.mapActions)("task",["getTask"]),{loadData:function t(){this.parameters=JSON.parse(this.$route.params.parameters)}})};e["default"]=o},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(221);var s=a.n(n);for(var i in n)if(i!=="default")(function(t){a.d(e,t,function(){return n[t]})})(i);e["default"]=s.a},function(t,e,a){"use strict";(function(t){var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(56));var i=n(a(44));var r=n(a(45));var o=n(a(35));var l=a(160);var c=n(a(226));var u=a(36);var d={CREATED:[window.gettext("未执行"),"info"],RUNNING:[window.gettext("执行中"),"info"],SUSPENDED:[window.gettext("暂停"),"warning"],NODE_SUSPENDED:[window.gettext("节点暂停"),"warning"],FAILED:[window.gettext("失败"),"danger"],FINISHED:[window.gettext("完成"),"success"],REVOKED:[window.gettext("撤销"),"danger"]};var f={name:"",components:{MobileCanvas:c["default"]},provide:function t(){return{refreshTaskStatus:this.setTaskStatusTimer}},data:function t(){return{operating:false,revokeConfirmShow:false,taskId:0,task:{},taskState:"",taskStateClass:"",taskStateName:"",taskStateColor:"",pipelineTree:{},timer:null,loading:true,i18n:{tip:window.gettext("提示"),executeStart:window.gettext("开始执行任务"),executeStartFailed:window.gettext("开始执行任务失败"),loading:window.gettext("加载中...")}}},computed:{canvasData:function t(){this.pipelineTree=this.$store.state.pipelineTree;var e=this.pipelineTree,a=e.line,n=a===void 0?[]:a,s=e.location,i=s===void 0?[]:s,r=e.gateways,o=r===void 0?{}:r;return{lines:n,nodes:i,gateways:o}}},created:function t(){this.loadData()},methods:(0,o["default"])({},(0,u.mapActions)("task",["getTask","getTaskStatus","instanceStart","instancePause","instanceResume","instanceRevoke"]),{loadData:function t(){var e=this;return(0,r["default"])(i["default"].mark(function t(){return i["default"].wrap(function t(a){while(1){switch(a.prev=a.next){case 0:a.prev=0;e.$toast.loading({mask:true,message:e.i18n.loading});e.taskId=e.$route.query.taskId;a.next=5;return e.getTask({id:e.taskId});case 5:e.task=a.sent;e.pipelineTree=JSON.parse(e.task.pipeline_tree);e.$store.commit("setPipelineTree",e.pipelineTree);a.next=10;return e.loadTaskStatus();case 10:e.$nextTick(function(){e.loading=false;e.$toast.clear()});a.next=16;break;case 13:a.prev=13;a.t0=a["catch"](0);(0,l.errorHandler)(a.t0,e);case 16:case"end":return a.stop()}}},t,null,[[0,13]])}))()},onOperationClick:function t(e){if(!this.operating){this.operating=true;this[e]()}},updateTaskNodes:function t(e){var a=this;if(e.state!=="CREATED"){this.canvasData.nodes.forEach(function(t){var n=e.children[t.id];a.$set(t,"data",n);if(n){a.$set(t,"status",n.state);if(n.state==="RUNNING"||n.state==="FAILED"){if(a.$refs.canvas){a.$refs.canvas.setCanvasPosition(t)}}}})}},loadTaskStatus:function t(){var e=this;return(0,r["default"])(i["default"].mark(function t(){var a,n;return i["default"].wrap(function t(i){while(1){switch(i.prev=i.next){case 0:i.prev=0;i.next=3;return e.getTaskStatus({id:e.taskId});case 3:a=i.sent;if(a.result){e.taskState=a.data.state;if(e.taskState==="RUNNING"){e.setTaskStatusTimer()}e.updateTaskNodes(a.data);n=["task-status"].concat((0,s["default"])(d[e.taskState]));e.taskStateClass=n[0];e.taskStateName=n[1];e.taskStateColor=n[2]}else{e.cancelTaskStatusTimer();(0,l.errorHandler)(a,e)}i.next=11;break;case 7:i.prev=7;i.t0=i["catch"](0);e.cancelTaskStatusTimer();(0,l.errorHandler)(i.t0,e);case 11:case"end":return i.stop()}}},t,null,[[0,7]])}))()},setTaskStatusTimer:function t(){var e=this;this.cancelTaskStatusTimer();this.timer=setTimeout(function(){e.loadTaskStatus()},2e3)},cancelTaskStatusTimer:function t(){if(this.timer){clearTimeout(this.timer);this.timer=null}},execute:function e(){var a=this;return(0,r["default"])(i["default"].mark(function e(){var n;return i["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;a.$toast.loading({mask:true,message:a.i18n.loading});s.next=4;return a.instanceStart({id:a.taskId});case 4:n=s.sent;if(n.result){t.bus.$emit("notify",{message:a.i18n.executeStart});a.setTaskStatusTimer()}else{(0,l.errorHandler)(n,a)}s.next=11;break;case 8:s.prev=8;s.t0=s["catch"](0);(0,l.errorHandler)(s.t0,a);case 11:s.prev=11;a.$toast.clear();a.operating=false;return s.finish(11);case 15:case"end":return s.stop()}}},e,null,[[0,8,11,15]])}))()},revoke:function e(){var a=this;return(0,r["default"])(i["default"].mark(function e(){var n;return i["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return a.instanceRevoke({id:a.taskId});case 3:n=s.sent;if(n.result){t.bus.$emit("notify",{message:window.gettext("撤销成功")});setTimeout(function(){a.setTaskStatusTimer()},1e3)}else{(0,l.errorHandler)(n,a)}s.next=10;break;case 7:s.prev=7;s.t0=s["catch"](0);(0,l.errorHandler)(s.t0,a);case 10:s.prev=10;a.operating=false;return s.finish(10);case 13:case"end":return s.stop()}}},e,null,[[0,7,10,13]])}))()},onDetailClick:function t(){this.cancelTaskStatusTimer();this.$router.push({path:"/task/detail",query:{taskId:String(this.taskId)}})},pause:function e(){var a=this;return(0,r["default"])(i["default"].mark(function e(){var n;return i["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return a.instancePause({id:a.taskId});case 3:n=s.sent;if(n.result){t.bus.$emit("notify",{message:window.gettext("暂停成功")})}else{(0,l.errorHandler)(n,a)}s.next=10;break;case 7:s.prev=7;s.t0=s["catch"](0);(0,l.errorHandler)(s.t0,a);case 10:s.prev=10;a.operating=false;return s.finish(10);case 13:case"end":return s.stop()}}},e,null,[[0,7,10,13]])}))()},resume:function e(){var a=this;return(0,r["default"])(i["default"].mark(function e(){var n;return i["default"].wrap(function e(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return a.instanceResume({id:a.taskId});case 3:n=s.sent;if(n.result){a.setTaskStatusTimer();t.bus.$emit("notify",{message:window.gettext("任务继续成功")})}else{(0,l.errorHandler)(n,a)}s.next=10;break;case 7:s.prev=7;s.t0=s["catch"](0);(0,l.errorHandler)(s.t0,a);case 10:s.prev=10;a.operating=false;return s.finish(10);case 13:case"end":return s.stop()}}},e,null,[[0,7,10,13]])}))()},onRevokeConfirm:function t(){var e=this;this.$dialog.confirm({message:window.gettext("撤销任务?")}).then(function(){e.revokeConfirmShow=false;e.revoke()})["catch"](function(){e.revokeConfirmShow=false})}})};e["default"]=f}).call(this,a(11))},function(t,e,a){},,,,function(t,e,a){"use strict";a.r(e);var n=a(402);var s=a(169);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(369);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(403);var s=a(180);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(370);var o=a(16);var l=a(371);var c=a.n(l);var u=Object(o["a"])(s["default"],n["a"],n["b"],false,null,null,null);if(typeof c.a==="function")c()(u);e["default"]=u.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NAME_REG=e.URL_REG=void 0;var n=/^[^'"‘’“”\$<>]+$/;e.NAME_REG=n;var s=new RegExp("^(https?|ftp|file)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]$");e.URL_REG=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";a.r(e);var n=a(188);for(var s in n)if(s!=="default")(function(t){a.d(e,t,function(){return n[t]})})(s);var i=a(16);var r,o;var l=Object(i["a"])(n["default"],r,o,false,null,null,null);e["default"]=l.exports},,,,,function(t,e,a){"use strict";var n=a(164);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";var n=a(8);Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var s=n(a(37));var i=a(363);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){r(t,e,a[e])})}return t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],n=!0,s=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0){}}catch(t){s=!0,i=t}finally{try{n||null==o["return"]||o["return"]()}finally{if(s)throw i}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=function t(e,a,n,s,i,r,o,l,c,u){"boolean"!=typeof o&&(c=l,l=o,o=!1);var d,f="function"==typeof n?n.options:n;if(e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,i&&(f.functional=!0)),s&&(f._scopeId=s),r?(d=function t(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},f._ssrRegister=d):a&&(d=o?function(){a.call(this,u(this.$root.$options.shadowRoot))}:function(t){a.call(this,l(t))}),d)if(f.functional){var v=f.render;f.render=function(t,e){return d.call(e),v(t,e)}}else{var p=f.beforeCreate;f.beforeCreate=p?[].concat(p,d):[d]}return n},u="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var d=document.head||document.getElementsByTagName("head")[0],f={};var v=function t(e){return function(t,e){return function(t,e){var a=u?e.media||"default":t,n=f[a]||(f[a]={ids:new Set,styles:[]});if(!n.ids.has(t)){n.ids.add(t);var s=e.source;if(e.map&&(s+="\n/*# sourceURL="+e.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),d.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(s),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var i=n.ids.size-1,r=document.createTextNode(s),o=n.element.childNodes;o[i]&&n.element.removeChild(o[i]),o.length?n.element.insertBefore(r,o[i]):n.element.appendChild(r)}}}(t,e)}},p=c({render:function t(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"palette-panel"},[this._t("palette",[this._m(0)])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"palette-group"},[e("li",[e("div",{staticClass:"palette-default-item type-a",attrs:{"data-type":"type-a"}},[this._v("A")])]),e("li",[e("div",{staticClass:"palette-default-item type-b",attrs:{"data-type":"type-b"}},[this._v("B")])]),e("li",[e("div",{staticClass:"palette-default-item type-c",attrs:{"data-type":"type-c"}},[this._v("C")])]),e("li",[e("div",{staticClass:"palette-default-item type-d",attrs:{"data-type":"type-d"}},[this._v("D")])])])}]},function(t){t&&t("data-v-6c6ee110_0",{source:".palette-group{margin:0;padding:0;background:#fcfcfc;text-align:center;list-style:none}.palette-group>li{padding:14px 0}.palette-default-item{display:inline-block;width:40px;height:40px;line-height:40px;font-size:12px;color:#888;border:1px solid #999;border-radius:2px;cursor:pointer;user-select:none}.palette-default-item:hover{box-shadow:0 0 8px rgba(50,50,50,.3)}.type-a{border-radius:50%}.type-b{border-radius:50%;border:4px solid #333}.type-c,.type-d{height:30px;line-height:30px;border:1px solid #999}.type-d{position:relative}.type-d:after{content:'';position:absolute;top:0;right:0;width:5px;height:5px;border-radius:50%;background:#ccc}",map:void 0,media:void 0})},{name:"PalettePanel",props:["selector"],data:function t(){return{}},mounted:function t(){this.$emit("registerPaletteEvent")}},void 0,!1,void 0,v,void 0),m=c({render:function t(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"tool-panel"},e._l(e.tools,function(t,a){return n("div",{key:a,class:["tool-item",t.cls,{actived:"frameSelect"===t.type&&e.isFrameSelecting}],on:{click:function a(n){return e.onToolClick(t)}}},[e._v("\n        "+e._s(t.name||t.type)+"\n    ")])}),0)},staticRenderFns:[]},function(t){t&&t("data-v-6e027ad6_0",{source:".tool-item{display:inline-block;margin-right:10px;user-select:none;cursor:pointer}.tool-item:last-child{margin-right:0}.tool-item.actived{color:#3a84ff}",map:void 0,media:void 0})},{name:"ToolPanel",props:["tools","isFrameSelecting"],data:function t(){return{}},methods:{onToolClick:function t(e){this.$emit("onToolClick",e)}}},void 0,!1,void 0,v,void 0);function h(t){return"touches"in t?t.touches[0]:t}function g(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",a=0;a<7;a++){e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t+e}var k={showPalette:{type:Boolean,default:!0},showTool:{type:Boolean,default:!0},tools:{type:Array,default:function t(){return[{type:"zoomIn",name:"放大",cls:"tool-item"},{type:"zoomOut",name:"缩小",cls:"tool-item"},{type:"resetPosition",name:"重置",cls:"tool-item"},{type:"frameSelect",name:"框选",cls:"tool-item"}]}},editable:{type:Boolean,default:!0},selector:{type:String,default:"palette-default-item"},data:{type:Object,default:function t(){return{nodes:[],lines:[]}}},nodeOptions:{grid:[5,5]},connectorOptions:{type:Object,default:function t(){return{paintStyle:{fill:"transparent",stroke:"#a9adb6",strokeWidth:2},hoverPaintStyle:{fill:"transparent",stroke:"#3a84ff"}}}},endpointOptions:{type:Object,default:function t(){return{endpoint:"Dot",connector:["Flowchart",{stub:[1,6],alwaysRespectStub:!0,gap:8,cornerRadius:2}],connectorOverlays:[["PlainArrow",{width:8,length:6,location:1,id:"arrow"}]],anchor:["Left","Right","Top","Bottom"],isSource:!0,isTarget:!0}}}},w={mousedown:"ontouchstart"in document.documentElement?"touchstart":"mousedown",mousemove:"ontouchmove"in document.documentElement?"touchmove":"mousemove",mouseup:"ontouchend"in document.documentElement?"touchend":"mouseup"},b=c({render:function t(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"jsflow"},[n("div",{staticClass:"canvas-area"},[e.showTool?n("div",{staticClass:"tool-panel-wrap"},[e._t("toolPanel",[n("tool-panel",{attrs:{tools:e.tools,"is-frame-selecting":e.isFrameSelecting},on:{onToolClick:e.onToolClick}})])],2):e._e(),e.showPalette?n("div",{staticClass:"palette-panel-wrap"},[e._t("palettePanel",[n("palette-panel",{ref:"palettePanel",attrs:{selector:e.selector},on:{registerPaletteEvent:e.registerPaletteEvent}})])],2):e._e(),n("div",{ref:"canvasFlowWrap",staticClass:"canvas-flow-wrap",style:e.canvasWrapStyle,on:e._d({},[e.mousedown,e.onCanvasMouseDown,e.mouseup,e.onCanvasMouseUp])},[n("div",{ref:"canvasFlow",staticClass:"canvas-flow",style:e.canvasStyle,attrs:{id:"canvas-flow"}},e._l(e.nodes,function(t){return n("div",{key:t.id,staticClass:"jsflow-node",style:e.setNodeInitialPos(t),attrs:{id:t.id}},[e._t("nodeTemplate",[n("div",{staticClass:"node-default"})],{node:t})],2)}),0),e.isFrameSelecting?n("div",{staticClass:"canvas-frame-selector",style:e.frameSelectorStyle}):e._e()]),e.showAddingNode?n("div",{staticClass:"jsflow-node adding-node",style:e.setNodeInitialPos(e.addingNodeConfig)},[e._t("nodeTemplate",[n("div",{staticClass:"node-default"})],{node:e.addingNodeConfig})],2):e._e()])])},staticRenderFns:[]},function(t){t&&t("data-v-9bb50c98_0",{source:".jsflow{height:100%;border:1px solid #ccc}.jsflow .canvas-area{position:relative;height:100%}.jsflow .tool-panel-wrap{position:absolute;top:20px;left:70px;padding:10px 20px;background:#c4c6cc;opacity:.65;border-radius:4px;z-index:4}.jsflow .palette-panel-wrap{float:left;width:60px;height:100%;border-right:1px solid #ccc}.jsflow .canvas-flow-wrap{position:relative;height:100%;overflow:hidden}.jsflow .canvas-flow{position:relative;min-width:100%;min-height:100%}.jsflow .canvas-frame-selector{position:absolute;border:1px solid #3a84ff;background:rgba(58,132,255,.15)}.jsflow .jsflow-node{position:absolute}.jsflow .jsflow-node .node-default{width:120px;height:80px;line-height:80px;border:1px solid #ccc;border-radius:2px;text-align:center}.jsflow .jsflow-node.selected{border:1px solid #3a84ff}.jsflow .adding-node{opacity:.8}",map:void 0,media:void 0})},{name:"JsFlow",components:{PalettePanel:p,ToolPanel:m},model:{prop:"data",event:"change"},props:k,data:function t(){var e=this.data;return o({nodes:e.nodes,lines:e.lines,canvasGrabbing:!1,isFrameSelecting:!1,mouseDownPos:{},canvasPos:{x:0,y:0},canvasOffset:{x:0,y:0},frameSelectorPos:{x:0,y:0},frameSelectorRect:{width:0,height:0},selectedNodes:[],showAddingNode:!1,addingNodeConfig:{},addingNodeRect:{},canvasRect:{},paletteRect:{},zoom:1},w)},computed:{canvasWrapStyle:function t(){return{cursor:this.isFrameSelecting?"crosshair":this.canvasGrabbing?"-webkit-grabbing":"-webkit-grab"}},canvasStyle:function t(){return{left:"".concat(this.canvasOffset.x,"px"),top:"".concat(this.canvasOffset.y,"px")}},frameSelectorStyle:function t(){return{left:"".concat(this.frameSelectorPos.x,"px"),top:"".concat(this.frameSelectorPos.y,"px"),width:"".concat(this.frameSelectorRect.width,"px"),height:"".concat(this.frameSelectorRect.height,"px")}}},watch:{data:{handler:function t(e){var a=e.nodes,n=e.lines;this.nodes=a,this.lines=n},deep:!0}},mounted:function t(){this.initCanvas(),this.registerEvent(),this.renderData(),this.canvasRect=this.$refs.canvasFlow.getBoundingClientRect(),this.paletteRect=this.$refs.palettePanel?this.$refs.palettePanel.$el.getBoundingClientRect():{}},beforeDestroy:function t(){this.$refs.palettePanel&&this.$refs.palettePanel.$el.removeEventListener(this.mousedown,this.nodeCreateHandler),this.$el.removeEventListener(this.mousemove,this.nodeMovingHandler),document.removeEventListener(this.mouseup,this.nodeMoveEndHandler)},methods:{initCanvas:function t(){this.instance=i.jsPlumb.getInstance({container:"canvas-flow"})},registerEvent:function t(){var e=this;this.instance.bind("beforeDrag",function(t){return console.log("beforeDrag:",t),!0}),this.instance.bind("beforeDrop",function(t){return!0}),this.instance.bind("connection",function(t){console.log("connection")}),this.instance.bind("beforeDetach",function(t){return console.log("beforeDetach"),!0}),this.instance.bind("connectionDetached",function(t,a){var n=e.lines.filter(function(e){return e.source.id!==t.sourceId&&e.target.id!==t.targetId});e.lines=n,console.log("connectionDetached")}),this.instance.bind("connectionMoved",function(t,e){console.log("connectionMoved")}),this.instance.bind("click",function(t,e){console.log(t,e)}),this.instance.bind("dblclick",function(t,e){console.log(t,e)})},renderData:function t(){var e=this;this.instance.batch(function(){e.nodes.forEach(function(t){e.setNodeDraggable(t,e.nodeOptions),e.setNodeEndPoint(t,e.endpointOptions)}),e.lines.forEach(function(t){e.createConnector(t,e.connectorOptions)})})},createNode:function t(e){var a=this;this.nodes.push(e),this.$nextTick(function(){a.setNodeDraggable(e,a.nodeOptions),a.setNodeEndPoint(e,a.endpointOptions)})},removeNode:function t(e){var a=this.nodes.findIndex(function(t){return t.id===e.id});this.nodes.splice(a,1),this.instance.remove(e.id)},setNodeEndPoint:function t(e,a){var n=this;(e.endpoints||["Top","Right","Bottom","Left"]).forEach(function(t){n.instance.addEndpoint(e.id,o({anchor:t,uuid:t+e.id},a))})},setNodeDraggable:function t(e,a){if(this.editable){var n=this;this.instance.draggable(e.id,o({grid:[20,20],stop:function t(a){var i=n.nodes.findIndex(function(t){return t.id===e.id}),r=(0,s["default"])({},e),o=l(a.pos,2),c=o[0],u=o[1];r.x=c,r.y=u,n.nodes.splice(i,1,r),n.$emit("onNodeMove",r,a)}},a))}},setNodeInitialPos:function t(e){return{left:"".concat(e.x,"px"),top:"".concat(e.y,"px")}},createConnector:function t(e,a){var n=e.options||{};return this.instance.connect({source:e.source.id,target:e.target.id,uuids:[e.source.arrow+e.source.id,e.target.arrow+e.target.id]},o({},a,n))},removeConnector:function t(e){var a=this;this.instance.getConnections({source:e.source.id,target:e.target.id}).forEach(function(t){a.instance.detach(t)})},addLineOverlay:function t(e,a){var n=this.instance.getConnections({source:e.source.id,target:e.target.id});console.log(n),n.forEach(function(t){t.addOverlay([a.type,{label:a.name,location:a.location,cssClass:a.cls}])})},removeLineOverlay:function t(){},onCanvasMouseDown:function t(e){console.log(e),console.log(1),e=h(e),console.log(e),this.isFrameSelecting?this.frameSelectHandler(e):(this.canvasGrabbing=!0,this.mouseDownPos={x:e.pageX,y:e.pageY},this.$refs.canvasFlowWrap.addEventListener(this.mousemove,this.canvasFlowMoveHandler,!1))},canvasFlowMoveHandler:function t(e){e=h(e),this.canvasOffset={x:this.canvasPos.x+e.pageX-this.mouseDownPos.x,y:this.canvasPos.y+e.pageY-this.mouseDownPos.y}},onCanvasMouseUp:function t(e){this.isFrameSelecting?this.frameSelectEndHandler(e):(this.canvasGrabbing=!1,this.$refs.canvasFlowWrap.removeEventListener(this.mousemove,this.canvasFlowMoveHandler),this.canvasPos={x:this.canvasOffset.x,y:this.canvasOffset.y})},registerPaletteEvent:function t(){this.$refs.palettePanel.$el.addEventListener(this.mousedown,this.nodeCreateHandler,!1)},nodeCreateHandler:function t(e){var a=this;console.info("mousedown:",e.target);var n=function t(e,a){return 1===e.nodeType&&e.classList.contains(a)?e:"HTML"!==e.parentNode.nodeName?t(e.parentNode,a):null}(e.target,this.selector);if(!n)return!1;var s=n.dataset.type?n.dataset.type:"",i=n.dataset?n.dataset.config:{};this.showAddingNode=!0,this.addingNodeConfig.id=g("node"),this.addingNodeConfig.type=s,this.$nextTick(function(){var t=a.$el.querySelector(".adding-node");a.addingNodeRect=t.getBoundingClientRect();var n=a.getAddingNodePos(e);a.addingNodeConfig=o({id:g("node"),type:s,x:n.x,y:n.y},i),a.$el.addEventListener(a.mousemove,a.nodeMovingHandler,!1),document.addEventListener(a.mouseup,a.nodeMoveEndHandler,!1)})},nodeMovingHandler:function t(e){console.log("moving:",e.pageX,e.pageY);var a=this.getAddingNodePos(e);this.$set(this.addingNodeConfig,"x",a.x),this.$set(this.addingNodeConfig,"y",a.y)},nodeMoveEndHandler:function t(e){if(this.$el.removeEventListener(this.mousemove,this.nodeMovingHandler),document.removeEventListener(this.mouseup,this.nodeMoveEndHandler),this.showAddingNode=!1,e.pageX>this.paletteRect.left+this.paletteRect.width){var a=this.addingNodeConfig.x-this.paletteRect.width-this.canvasOffset.x,n=this.addingNodeConfig.y-this.canvasOffset.y;this.$set(this.addingNodeConfig,"x",a),this.$set(this.addingNodeConfig,"y",n),this.createNode(this.addingNodeConfig)}this.addingNodeConfig={},this.addingNodeRect={},console.info("move end:",e.pageX,e.pageY)},getAddingNodePos:function t(e){return{x:e.pageX-this.paletteRect.left-this.addingNodeRect.width/2,y:e.pageY-this.paletteRect.top-this.addingNodeRect.height/2}},onToolClick:function t(e){"function"==typeof this[e.type]&&this[e.type](),this.$emit("onToolClick",e)},setZoom:function t(e){this.instance.setContainer("canvas-flow");this.$refs.canvasFlow.style.transform="matrix("+e+",0,0,"+e+",0,0)",this.$refs.canvasFlow.style.transformOrigin="0 0",this.$refs.canvasFlow.zoom=e,this.zoom=e,this.instance.setZoom(e)},zoomIn:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.1;this.setZoom(this.zoom*e)},zoomOut:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.9;this.setZoom(this.zoom*e)},resetPosition:function t(){this.setZoom(1),this.setCanvasPosition(0,0)},setCanvasPosition:function t(e,a){this.canvasOffset={x:e,y:a},this.canvasPos={x:e,y:a}},frameSelect:function t(){this.isFrameSelecting=!0},frameSelectHandler:function t(e){this.mouseDownPos={x:e.pageX-this.canvasRect.left,y:e.pageY-this.canvasRect.top},this.$refs.canvasFlowWrap.addEventListener(this.mousemove,this.frameSelectMovingHandler,!1)},frameSelectMovingHandler:function t(e){var a=e.pageX-this.mouseDownPos.x-this.canvasRect.left,n=e.pageY-this.mouseDownPos.y-this.canvasRect.top;this.frameSelectorRect={width:Math.abs(a),height:Math.abs(n)},this.frameSelectorPos={x:a>0?this.mouseDownPos.x:this.mouseDownPos.x+a,y:n>0?this.mouseDownPos.y:this.mouseDownPos.y+n}},frameSelectEndHandler:function t(e){this.$refs.canvasFlowWrap.removeEventListener(this.mousemove,this.frameSelectMovingHandler),this.$refs.canvasFlowWrap.removeEventListener(this.mouseup,this.frameSelectEndHandler),document.addEventListener("keydown",this.nodeLineCopyhandler,!1),document.addEventListener("keydown",this.nodeLinePastehandler,!1),document.addEventListener("keydown",this.nodeLineDeletehandler,!1),document.addEventListener(this.mousedown,this.cancelFrameSelectorHandler,{capture:!1,once:!0});var a=this.getSelectedNodes();this.isFrameSelecting=!1,this.frameSelectorPos={x:0,y:0},this.frameSelectorRect={width:0,height:0},console.log(a),this.selectedNodes=a,this.$emit("frameSelectNodes",a.slice(0))},getSelectedNodes:function t(){var e=this,a=this.frameSelectorPos,n=a.x,s=a.y,i=this.frameSelectorRect,r=i.width,o=i.height;return this.nodes.filter(function(t){var a=document.querySelector("#".concat(t.id)),i=a.getBoundingClientRect(),l=i.left-e.canvasRect.left,c=i.top-e.canvasRect.top;if(n<l&&n+r>l&&s<c&&s+o>c)return a.classList.add("selected"),!0})},cancelFrameSelectorHandler:function t(e){this.selectedNodes.forEach(function(t){var e=document.querySelector("#".concat(t.id));e&&e.classList.remove("selected")}),this.selectedNodes=[]},nodeLineCopyhandler:function t(e){(e.ctrlKey||e.metaKey)&&67===e.keyCode&&this.$emit("onNodeCopy",this.selectedNodes)},nodeLinePastehandler:function t(e){(e.ctrlKey||e.metaKey)&&86===e.keyCode&&this.$emit("onNodePaste")},nodeLineDeletehandler:function t(e){var a=this;46!==e.keyCode&&8!==e.keyCode||(this.selectedNodes.forEach(function(t){a.removeNode(t)}),this.cancelFrameSelectorHandler())}}},void 0,!1,void 0,v,void 0);"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("js-flow",b);var x=b;e["default"]=x},,function(t,e,a){"use strict";a.r(e);var n=a(405);var s=a(171);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(367);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"5df8602c",null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(415);var s=a(173);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(366);var o=a(16);var l=Object(o["a"])(s["default"],n["a"],n["b"],false,null,"53effcd7",null);e["default"]=l.exports},function(t,e,a){"use strict";var n=a(175);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";var n=a(176);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.endpointOptions=e.connectorOptions=void 0;var n={paintStyle:{strokeWidth:1,stroke:"#666",outlineWidth:1},overlays:[["PlainArrow",{width:8,length:6,location:1}]],connector:["Flowchart"]};e.connectorOptions=n;var s={endpoint:"Rectangle",anchor:["Top","Right","Bottom","Left"],isSource:true,isTarget:true,paintStyle:{},hoverPaintStyle:{},detachable:false};e.endpointOptions=s},function(t,e,a){"use strict";var n=a(177);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";var n=a(182);var s=a.n(n);var i=s.a},function(t,e){},,function(t,e,a){var n={"./af":229,"./af.js":229,"./ar":230,"./ar-dz":231,"./ar-dz.js":231,"./ar-kw":232,"./ar-kw.js":232,"./ar-ly":233,"./ar-ly.js":233,"./ar-ma":234,"./ar-ma.js":234,"./ar-sa":235,"./ar-sa.js":235,"./ar-tn":236,"./ar-tn.js":236,"./ar.js":230,"./az":237,"./az.js":237,"./be":238,"./be.js":238,"./bg":239,"./bg.js":239,"./bm":240,"./bm.js":240,"./bn":241,"./bn.js":241,"./bo":242,"./bo.js":242,"./br":243,"./br.js":243,"./bs":244,"./bs.js":244,"./ca":245,"./ca.js":245,"./cs":246,"./cs.js":246,"./cv":247,"./cv.js":247,"./cy":248,"./cy.js":248,"./da":249,"./da.js":249,"./de":250,"./de-at":251,"./de-at.js":251,"./de-ch":252,"./de-ch.js":252,"./de.js":250,"./dv":253,"./dv.js":253,"./el":254,"./el.js":254,"./en-SG":255,"./en-SG.js":255,"./en-au":256,"./en-au.js":256,"./en-ca":257,"./en-ca.js":257,"./en-gb":258,"./en-gb.js":258,"./en-ie":259,"./en-ie.js":259,"./en-il":260,"./en-il.js":260,"./en-nz":261,"./en-nz.js":261,"./eo":262,"./eo.js":262,"./es":263,"./es-do":264,"./es-do.js":264,"./es-us":265,"./es-us.js":265,"./es.js":263,"./et":266,"./et.js":266,"./eu":267,"./eu.js":267,"./fa":268,"./fa.js":268,"./fi":269,"./fi.js":269,"./fo":270,"./fo.js":270,"./fr":271,"./fr-ca":272,"./fr-ca.js":272,"./fr-ch":273,"./fr-ch.js":273,"./fr.js":271,"./fy":274,"./fy.js":274,"./ga":275,"./ga.js":275,"./gd":276,"./gd.js":276,"./gl":277,"./gl.js":277,"./gom-latn":278,"./gom-latn.js":278,"./gu":279,"./gu.js":279,"./he":280,"./he.js":280,"./hi":281,"./hi.js":281,"./hr":282,"./hr.js":282,"./hu":283,"./hu.js":283,"./hy-am":284,"./hy-am.js":284,"./id":285,"./id.js":285,"./is":286,"./is.js":286,"./it":287,"./it-ch":288,"./it-ch.js":288,"./it.js":287,"./ja":289,"./ja.js":289,"./jv":290,"./jv.js":290,"./ka":291,"./ka.js":291,"./kk":292,"./kk.js":292,"./km":293,"./km.js":293,"./kn":294,"./kn.js":294,"./ko":295,"./ko.js":295,"./ku":296,"./ku.js":296,"./ky":297,"./ky.js":297,"./lb":298,"./lb.js":298,"./lo":299,"./lo.js":299,"./lt":300,"./lt.js":300,"./lv":301,"./lv.js":301,"./me":302,"./me.js":302,"./mi":303,"./mi.js":303,"./mk":304,"./mk.js":304,"./ml":305,"./ml.js":305,"./mn":306,"./mn.js":306,"./mr":307,"./mr.js":307,"./ms":308,"./ms-my":309,"./ms-my.js":309,"./ms.js":308,"./mt":310,"./mt.js":310,"./my":311,"./my.js":311,"./nb":312,"./nb.js":312,"./ne":313,"./ne.js":313,"./nl":314,"./nl-be":315,"./nl-be.js":315,"./nl.js":314,"./nn":316,"./nn.js":316,"./pa-in":317,"./pa-in.js":317,"./pl":318,"./pl.js":318,"./pt":319,"./pt-br":320,"./pt-br.js":320,"./pt.js":319,"./ro":321,"./ro.js":321,"./ru":322,"./ru.js":322,"./sd":323,"./sd.js":323,"./se":324,"./se.js":324,"./si":325,"./si.js":325,"./sk":326,"./sk.js":326,"./sl":327,"./sl.js":327,"./sq":328,"./sq.js":328,"./sr":329,"./sr-cyrl":330,"./sr-cyrl.js":330,"./sr.js":329,"./ss":331,"./ss.js":331,"./sv":332,"./sv.js":332,"./sw":333,"./sw.js":333,"./ta":334,"./ta.js":334,"./te":335,"./te.js":335,"./tet":336,"./tet.js":336,"./tg":337,"./tg.js":337,"./th":338,"./th.js":338,"./tl-ph":339,"./tl-ph.js":339,"./tlh":340,"./tlh.js":340,"./tr":341,"./tr.js":341,"./tzl":342,"./tzl.js":342,"./tzm":343,"./tzm-latn":344,"./tzm-latn.js":344,"./tzm.js":343,"./ug-cn":345,"./ug-cn.js":345,"./uk":346,"./uk.js":346,"./ur":347,"./ur.js":347,"./uz":348,"./uz-latn":349,"./uz-latn.js":349,"./uz.js":348,"./vi":350,"./vi.js":350,"./x-pseudo":351,"./x-pseudo.js":351,"./yo":352,"./yo.js":352,"./zh-cn":353,"./zh-cn.js":353,"./zh-hk":354,"./zh-hk.js":354,"./zh-tw":355,"./zh-tw.js":355};function s(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");e.code="MODULE_NOT_FOUND";throw e}return n[t]}s.keys=function t(){return Object.keys(n)};s.resolve=i;t.exports=s;s.id=373},,function(t,e,a){var n={"./VantCell.vue":376,"./VantCheckbox.vue":377,"./VantDateTime.vue":378,"./VantInput.vue":379,"./VantInt.vue":380,"./VantPassword.vue":381,"./VantRadio.vue":382,"./VantSelect.vue":383,"./VantTextarea.vue":384};function s(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");e.code="MODULE_NOT_FOUND";throw e}return n[t]}s.keys=function t(){return Object.keys(n)};s.resolve=i;t.exports=s;s.id=375},function(t,e,a){"use strict";a.r(e);var n=a(412);var s=a(190);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(410);var s=a(192);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(409);var s=a(194);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(406);var s=a(196);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(411);var s=a(198);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(414);var s=a(200);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(407);var s=a(202);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(408);var s=a(204);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";a.r(e);var n=a(413);var s=a(206);for(var i in s)if(i!=="default")(function(t){a.d(e,t,function(){return s[t]})})(i);var r=a(16);var o=Object(r["a"])(s["default"],n["a"],n["b"],false,null,null,null);e["default"]=o.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var n={timeTransform:function t(e){var a=Number(e);if(a>0){if(a<60){return a+window.gettext(" 秒")}else if(a<3600){return parseFloat(a/60).toFixed(1)+window.gettext(" 分")}else if(a<86400){return parseFloat(a/3600).toFixed(1)+window.gettext(" 小时")}else{return parseFloat(a/86400).toFixed(1)+window.gettext(" 天")}}else{return"--"}}};var s=n;e["default"]=s},function(t,e,a){"use strict";var n=a(216);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";var n=a(219);var s=a.n(n);var i=s.a},function(t,e,a){"use strict";var n=a(222);var s=a.n(n);var i=s.a},,function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("van-search",{staticClass:"bk-search",attrs:{background:"false",placeholder:t.i18n.placeholder},on:{change:function(e){return t.search()},search:function(e){return t.search()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("section",{staticClass:"bk-block"},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.i18n.finishedText,error:t.error,"error-text":t.i18n.errorText},on:{"update:error":function(e){t.error=e},load:t.loadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.taskList,function(e){return a("van-cell",{key:e.id,attrs:{clickable:""},on:{click:function(a){return t.onClickTask(e.id)}}},[a("template",{slot:"title"},[a("div",{staticClass:"bk-text"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"bk-name"},[t._v(t._s(e.creator_name))]),t._v(" "),a("div",{staticClass:"bk-time"},[t._v("\n                        "+t._s(e.create_time)+t._s(t.i18n.to)+"\n                        "),e.finish_time?[a("p",[t._v(t._s(e.finish_time||"--"))])]:t._e()],2)]),t._v(" "),a("StatusIcon",{attrs:{status:e["status"]}})],2)}),1)],1)],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("div",{class:[t.taskStateClass,t.taskStateColor]},[t._v(t._s(t.taskStateName))]),t._v(" "),!t.loading?a("MobileCanvas",{ref:"canvas",attrs:{"canvas-data":t.canvasData}}):t._e(),t._v(" "),a("van-tabbar",[a("van-tabbar-item",[t.taskState==="CREATED"&&!t.operating?a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"play"},on:{click:function(e){return t.onOperationClick("execute")}},slot:"icon"}):t.taskState==="RUNNING"&&!t.operating?a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"pause"},on:{click:function(e){return t.onOperationClick("pause")}},slot:"icon"}):t.taskState==="SUSPENDED"&&!t.operating?a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"play"},on:{click:function(e){return t.onOperationClick("resume")}},slot:"icon"}):a("van-icon",{staticClass:"disabled",attrs:{slot:"icon","class-prefix":"icon",name:"pause",disabled:""},slot:"icon"})],1),t._v(" "),a("van-tabbar-item",[t.taskState!=="CREATED"&&t.taskState!=="REVOKED"&&t.taskState!=="FINISHED"&&!t.operating?a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"revoke"},on:{click:t.onRevokeConfirm},slot:"icon"}):a("van-icon",{staticClass:"disabled",attrs:{slot:"icon","class-prefix":"icon",name:"revoke",disabled:""},slot:"icon"})],1),t._v(" "),a("van-tabbar-item",[!t.operating?a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"file"},on:{click:t.onDetailClick},slot:"icon"}):a("van-icon",{staticClass:"disabled",attrs:{slot:"icon",disabled:"","class-prefix":"icon",name:"file"},slot:"icon"})],1)],1),t._v(" "),[a("van-dialog",{attrs:{title:t.i18n.tip,"show-cancel-button":""},model:{value:t.revokeConfirmShow,callback:function(e){t.revokeConfirmShow=e},expression:"revokeConfirmShow"}})]],2)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},,function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.i18n.finishedText,error:t.error,"error-text":t.i18n.errorText},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("div",{staticClass:"panel-list"},t._l(t.businessList,function(e){return a("van-cell",{key:e.cc_id,attrs:{title:e.cc_name},on:{click:function(a){return t.onClickBusiness(e.cc_id)}}},[a("template",{slot:"title"},[a("van-tag",{class:e.tagColor,attrs:{color:"false"}},[t._v(t._s(e.tag))]),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(e.cc_name))])],1)],2)}),1)])],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("van-search",{staticClass:"bk-search",attrs:{background:"false",placeholder:t.i18n.placeholder},on:{search:function(e){return t.search()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),t.collectTemplateList.length>0?a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-block-title"},[t._v(t._s(t.i18n.collect))]),t._v(" "),t._l(t.collectTemplateList,function(e){return a("van-cell",{key:e.id,attrs:{clickable:""},on:{click:function(a){return t.onClickTemplate(e.id)}}},[a("template",{slot:"title"},[a("div",{staticClass:"bk-text"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"bk-name"},[t._v(t._s(e.creator_name))]),t._v(" "),a("div",{staticClass:"bk-time"},[t._v(t._s(e.create_time))])]),t._v(" "),a("van-icon",{staticClass:"star-icon collection",attrs:{slot:"right-icon",name:"star"},slot:"right-icon"})],2)})],2):t._e(),t._v(" "),a("section",{staticClass:"bk-block"},[t.templateList.length>0?a("h2",{staticClass:"bk-block-title"},[t._v(t._s(t.business.cc_name))]):t._e(),t._v(" "),a("van-list",{attrs:{finished:t.finished,"finished-text":t.i18n.finishedText,error:t.error,"error-text":t.i18n.errorText},on:{"update:error":function(e){t.error=e},load:t.loadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.templateList,function(e){return a("van-cell",{key:e.id,on:{click:function(a){return t.onClickTemplate(e.id)}}},[a("template",{slot:"title"},[a("div",{staticClass:"bk-text"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"bk-name"},[t._v(t._s(e.creator_name))]),t._v(" "),a("div",{staticClass:"bk-time"},[t._v(t._s(e.create_time))])])],2)}),1)],1)],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[!t.loading?a("MobileCanvas",{attrs:{editable:false,"canvas-data":t.canvasData}}):t._e()],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("VueJsonPretty",{staticClass:"parameter-info",attrs:{data:t.parameters}})],1)])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("van-cell",[a("template",{slot:"title"},[a("div",{staticClass:"bk-text"},[t._v(t._s(t.nodeDetail.name))])]),t._v(" "),a("div",{staticClass:"status"},[!t.loadingIcon?a("StatusIcon",{attrs:{status:t.status,"show-text":true}}):t._e()],1)],2)],1),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.executeInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[a("van-cell",{attrs:{title:t.i18n.startTime,value:t.nodeDetail.start_time}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.endTime,value:t.nodeDetail.finish_time}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.costTime,value:t.getLastTime(t.nodeDetail.elapsed_time)}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.skipped,value:t.nodeDetail.skip?t.i18n.yes:t.i18n.no}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.ignore,value:t.nodeDetail.error_ignorable?t.i18n.yes:t.i18n.no}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.retryTimes,value:t.nodeDetail.retry}})],1)]),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.inputParameter))]),t._v(" "),a("VueJsonPretty",{staticClass:"parameter-info",attrs:{data:t.nodeDetail.inputs}}),t._v(" "),a("van-button",{staticClass:"view-btn",attrs:{type:"default"},on:{click:t.showParameters}},[t._v(t._s(t.i18n.showTotal))])],1),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.outputParameter))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[t.nodeDetail.outputs&&t.nodeDetail.outputs.length?t._l(t.nodeDetail.outputs,function(e){return a("van-cell",{key:e.index,attrs:{title:e.name,value:e.value?e.value.toString():"--"},domProps:{innerHTML:t._s(t.getOutputValue(e))}})}):[a("no-data")]],2)]),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.errorInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[t.nodeDetail.ex_data?a("van-cell",{attrs:{value:t.transformFailInfo(t.nodeDetail.ex_data)}}):a("no-data")],1)]),t._v(" "),t._l(t.nodeDetail.histories,function(e){return a("section",{key:e.index,staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.executeHistory))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[a("van-cell",{attrs:{title:t.i18n.startTime,value:e.start_time}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.endTime,value:e.finish_time}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.costTime,value:t.getLastTime(e.elapsed_time)}})],1)])})],2)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.taskInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[a("van-cell",{attrs:{title:t.i18n.taskName,value:t.task.name}})],1)]),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.paramInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[Object.keys(t.constants).length?[t._l(t.constants,function(t){return[a("van-cell",{key:t.id,attrs:{title:t.name,value:t.value}})]})]:[a("van-cell",{attrs:{title:"",value:t.i18n.noData}})]],2)])])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("van-cell",[a("template",{slot:"title"},[a("div",{staticClass:"bk-text"},[t._v(t._s(t.templateData.name))]),t._v(" "),a("div",{staticClass:"bk-name"},[t._v(t._s(t.templateData.creator_name))]),t._v(" "),a("div",{staticClass:"bk-time"},[t._v(t._s(t.templateData.create_time))])]),t._v(" "),a("van-icon",{class:["star-icon",t.collected?"collection":""],attrs:{slot:"right-icon",name:"star"},on:{click:t.collect},slot:"right-icon"})],2)],1),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.taskInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:t.taskNameRule,expression:"taskNameRule"}],attrs:{label:t.i18n.taskName,name:"taskName",error:t.errors.has("taskName"),"error-message":t.errors.first("taskName")},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}}),t._v(" "),a("van-cell",{attrs:{title:t.i18n.scheme,value:t.scheme},on:{click:function(e){t.show=true}}}),t._v(" "),a("van-cell",[a("router-link",{attrs:{to:"/template/preview?templateId="+t.templateId}},[t._v(t._s(t.i18n.canvasPreview))])],1)],1)]),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:true},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultSchemaIndex},on:{confirm:t.onConfirm,cancel:function(e){t.show=false}}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:true},model:{value:t.dateTimeShow,callback:function(e){t.dateTimeShow=e},expression:"dateTimeShow"}},[a("van-datetime-picker",{attrs:{type:"datetime","show-toolbar":""},on:{confirm:t.onDateTimeConfirm,cancel:t.onDateTimeCancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),a("section",{staticClass:"bk-block"},[a("h2",{staticClass:"bk-text-title"},[t._v(t._s(t.i18n.paramInfo))]),t._v(" "),a("div",{staticClass:"bk-text-list"},[Object.keys(t.templateConstants).length?[t._l(t.sortedConstants,function(e){return[!t.loadingConfig&&e.show_type==="show"?a("VantComponent",{key:e.key,attrs:{"source-code":e.source_tag,"custom-type":e.custom_type,label:e.name,placeholder:t.i18n.paramInput,value:e.value,data:e,"render-config":e.renderConfig},on:{dataChange:t.onInputDataChange}}):t._e()]})]:[a("no-data")]],2)]),t._v(" "),a("div",{staticClass:"btn-group"},[t.creating?a("van-button",{attrs:{loading:"",disabled:"","loading-text":t.i18n.btnCreate+"...",size:"large",type:"info"}}):a("van-button",{attrs:{size:"large",type:"info"},on:{click:t.onCreateClick}},[t._v(t._s(t.i18n.btnCreate))])],1)],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("div",{staticClass:"bk-text-list"},[a("van-field",{attrs:{label:t.i18n.timing,placeholder:"秒(s) 或 时间(%Y-%m-%d %H:%M:%S)",value:t.inputs["bk_timing"]}})],1)]),t._v(" "),a("div",{staticClass:"btn-group"},[a("van-button",{attrs:{size:"large",type:"default"},on:{click:t.gotoCanvas}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("van-button",{attrs:{size:"large",type:"info"},on:{click:t.onClick}},[t._v(t._s(t.i18n.confirm))])],1)])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("section",{staticClass:"bk-block"},[a("div",{staticClass:"bk-text-list"},[Object.keys(t.inputs).length?[t._l(t.inputs,function(e){return[a("VantComponent",{key:e.source_tag,attrs:{"source-code":e.source_tag,value:e.value,data:e},on:{dataChange:t.onInputDataChange,onSelect:t.onSelect,dateTimePick:t.onDateTimePick}})]})]:[a("no-data")]],2)]),t._v(" "),a("div",{staticClass:"btn-group"},[a("van-button",{attrs:{size:"large",type:"default"},on:{click:t.onClickCancel}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("van-button",{attrs:{size:"large",type:"info"},on:{click:t.onClick}},[t._v(t._s(t.i18n.confirm))])],1),t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:true},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-picker",{attrs:{"show-toolbar":"","default-index":t.defaultIndex,columns:t.columns},on:{confirm:t.onSelectConfirm,cancel:function(e){t.show=false}}})],1)],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("js-flow",{ref:"jsFlow",attrs:{selector:"entry-item","show-palette":false,"show-tool":false,editable:t.editable,"endpoint-options":t.endpointOptions,"connector-options":t.connectorOptions},scopedSlots:t._u([{key:"nodeTemplate",fn:function(t){var e=t.node;return[a("mobile-node-template",{attrs:{node:e}})]}}]),model:{value:t.canvasData,callback:function(e){t.canvasData=e},expression:"canvasData"}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return t.status?a("van-icon",{class:["task-icon",t.cls],attrs:{slot:"right-icon",name:t.name},slot:"right-icon"}):t._e()};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-cell",{attrs:{title:"",value:t.i18n.noData}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return t.node.type==="startpoint"?a("div",{class:["node-circle",t.node["status"]?t.node["status"].toLowerCase():""]},[a("div",{staticClass:"node-type-status"},[t._v(t._s(t.i18n.start))])]):t.node.type==="endpoint"?a("div",{class:["node-circle",t.node["status"]?t.node["status"].toLowerCase():""]},[a("div",{staticClass:"node-type-status"},[t._v(t._s(t.i18n.end))])]):t.node.type==="tasknode"?a("div",[a("div",{ref:"nodeLocation",class:["bk-flow-location",t.node["status"]?t.node["status"].toLowerCase():""],attrs:{name:"tip_"+t.node.id},on:{click:function(e){return t.onNodeClick(t.node,e)}}},[a("div",{staticClass:"node-name"},[a("p",{staticClass:"name"},[t._v(t._s(t.node.name))])]),t._v(" "),a("div",{staticClass:"task-name"},[t._v(t._s(t.node.stage_name))])]),t._v(" "),t.node.status&&t.node.status!=="CREATED"?a("Tooltips",{attrs:{node:t.node}}):t._e()],1):t.node.type==="subflow"?a("div",{ref:"nodeLocation",class:["bk-flow-location","node-subflow",t.node["status"]?t.node["status"].toLowerCase():""],on:{click:function(e){return t.onNodeClick(t.node,e)}}},[a("div",{staticClass:"node-name"},[a("div",{class:["subflow-node-icon",t.node["status"]?t.node["status"].toLowerCase():""]},[a("van-icon",{attrs:{name:"plus"}})],1),t._v(" "),a("p",{staticClass:"name"},[t._v(t._s(t.node.name))])]),t._v(" "),a("div",{staticClass:"task-name"},[t._v(t._s(t.node.stage_name))])]):a("div",{ref:"nodeLocation",staticClass:"node-circle"},[a("van-icon",{attrs:{slot:"icon","class-prefix":"icon",name:"node-"+t.node.type},slot:"icon"})],1)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:t.validation,expression:"validation"}],attrs:{label:t.label,name:"parameterInput",type:t.type,error:t.isError,"error-message":t.errors.first("parameterInput")},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-cell",{attrs:{title:t.label,value:t.data.value}},[t._v("\n    "+t._s(t.data.value)+"\n")])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"select-list"},[[a("van-cell",{attrs:{"is-link":"","arrow-direction":"down",title:t.label,value:t.value},on:{click:function(e){t.show=true}}},[t._v("\n            "+t._s(t.value)+"\n        ")])],t._v(" "),a("van-popup",{attrs:{position:"bottom",overlay:true},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-cell-group",[t.multiple?t._l(t.multipleSelectOptions,function(e){return a("van-cell",{key:e.value,attrs:{center:"true",title:e.text,clickable:""},on:{click:function(a){return t.onOptionClick(e)}}},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.selected,expression:"option.selected"}],attrs:{slot:"right-icon",name:"success",color:"#1989FA"},slot:"right-icon"})],1)}):a("tempate",[a("van-picker",{attrs:{"show-toolbar":"",columns:t.multipleSelectOptions,"default-index":t.defaultIndex},on:{confirm:t.onConfirm,cancel:function(e){t.show=false}}})],1)],2)],1)],2)};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-cell",{attrs:{title:t.label,value:t.data.value}},[t._v("\n    "+t._s(t.data.value)+"\n")])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-cell",{attrs:{title:t.label,value:t.data.value}},[t._v("\n    "+t._s(t.data.value)+"\n")])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-field",{attrs:{label:t.label,placeholder:t.placeholder,type:"number"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-cell",{attrs:{title:t.label,value:t.value}},[t._v("\n    "+t._s(t.value)+"\n")])};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-field",{attrs:{type:"textarea",autosize:"{ maxHeight: 10px }",label:t.label,placeholder:t.placeholder,rows:"1"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:t.validation,expression:"validation"}],attrs:{type:"password",name:"parameterInput",label:t.label,placeholder:t.i18n.placeholder,error:t.isError,"error-message":t.errors.first("parameterInput")},on:{focus:t.clearPassword},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})},function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return t.show?a("tippy",{ref:"tooltip_"+t.node.id,attrs:{to:"tip_"+t.node.id,placement:"bottom",arrow:"true",theme:"dark",interactive:"true","watch-props":"true"}},[t.node.type==="tasknode"?a("div",{staticClass:"tooltip"},[t.node.componentCode==="sleep_timer"&&t.node.status==="RUNNING"?[a("div",{staticClass:"tooltip-btn",on:{click:function(e){return t.onNodeOperationClick("editTime")}}},[t._v(t._s(t.i18n.editTime))])]:[t.node.status!=="RUNNING"?[a("div",{staticClass:"tooltip-btn",on:{click:t.onNodeExecuteDetail}},[t._v(t._s(t.i18n.detail))]),t._v(" "),t.node.status==="FAILED"?[a("div",{staticClass:"tooltip-btn",on:{click:function(e){return t.onNodeOperationClick("retry")}}},[t._v(t._s(t.i18n.retry))]),t._v(" "),a("div",{staticClass:"tooltip-btn",on:{click:function(e){return t.onNodeOperationClick("skip")}}},[t._v(t._s(t.i18n.skip))])]:t._e()]:[a("div",{staticClass:"tooltip-btn",on:{click:function(e){return t.onNodeOperationClick("resume")}}},[t._v(t._s(t.i18n.detail))])]]],2):t.node.type==="subflow"?a("div",{staticClass:"tooltip-btn"},[t._v(t._s(t.i18n.sub))]):t._e()]):t._e()};var s=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return s})}])]);